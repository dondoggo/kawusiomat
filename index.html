<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#6f4e37">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Kawusiomat">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icon.svg">
    <title>Kawusiomat</title>
    <link rel="stylesheet" href="style.css">
    <script>(function() { const t = localStorage.getItem('kawusiomat_theme'); if (t === 'modern') document.documentElement.setAttribute('data-theme', 'modern'); }());</script>
</head>
<body>
    <div class="container">
        <button type="button" id="theme-toggle-btn" class="theme-toggle-btn" title="Prze≈ÇƒÖcz motyw">‚óë</button>
        <header>
            <h1>‚òï Kawusiomat</h1>
            <p class="subtitle">Stw√≥rz idealnƒÖ kawƒô krok po kroku</p>
            <button type="button" id="pwa-install-btn" class="pwa-install-btn hidden">
                üì≤ Zainstaluj aplikacjƒô
            </button>
            <div id="ios-install-banner" class="ios-install-banner hidden">
                <span>Zainstaluj: tapnij</span>
                <svg class="ios-share-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"/><polyline points="16 6 12 2 8 6"/><line x1="12" y1="2" x2="12" y2="15"/></svg>
                <span>‚Üí <strong>Dodaj do ekranu g≈Ç√≥wnego</strong></span>
                <button type="button" class="ios-banner-close" id="ios-banner-close">‚úï</button>
            </div>
        </header>

        <!-- Progress -->
        <div class="wizard-progress" id="wizard-progress">
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
            <div class="progress-dots">
                <div class="progress-dot current" data-step="1">
                    <span class="dot-number">1</span>
                    <span class="dot-label">Ilo≈õƒá</span>
                </div>
                <div class="progress-dot" data-step="2">
                    <span class="dot-number">2</span>
                    <span class="dot-label">Rozmiar</span>
                </div>
                <div class="progress-dot" data-step="3">
                    <span class="dot-number">3</span>
                    <span class="dot-label">Rodzaj</span>
                </div>
                <div class="progress-dot" data-step="4">
                    <span class="dot-number">4</span>
                    <span class="dot-label">Moc</span>
                </div>
            </div>
        </div>

        <main>
            <!-- Favorites panel -->
            <div class="favorites-panel favorites-open hidden" id="favorites-panel">
                <div class="favorites-header" id="favorites-toggle">
                    <span class="favorites-title">‚≠ê Twoje przepisy</span>
                    <span class="favorites-badge" id="favorites-count">0</span>
                    <span class="favorites-chevron" id="favorites-chevron">‚ñ≤</span>
                </div>
                <div class="favorites-list" id="favorites-list"></div>
            </div>

            <!-- STEP 1: Cup count -->
            <section class="card" id="step-1">
                <h2>Ile fili≈ºanek?</h2>
                <div class="button-group" id="cup-count-group">
                    <button type="button" data-value="1" class="active">1</button>
                    <button type="button" data-value="2">2</button>
                    <button type="button" data-value="3">3</button>
                    <button type="button" data-value="4">4</button>
                    <button type="button" data-value="5">5</button>
                    <button type="button" data-value="6">6</button>
                </div>
                <div class="step-nav">
                    <div></div>
                    <button type="button" class="btn-next" id="next-1">Dalej ‚Üí</button>
                </div>
            </section>

            <!-- STEP 2: Cup sizes -->
            <section class="card hidden" id="step-2">
                <h2>Pojemno≈õƒá fili≈ºanek</h2>
                <div id="cup-sizes-container"></div>
                <div class="step-nav">
                    <button type="button" class="btn-back-step" id="back-2">‚Üê Wr√≥ƒá</button>
                    <button type="button" class="btn-next" id="next-2">Dalej ‚Üí</button>
                </div>
            </section>

            <!-- STEP 3: Coffee types -->
            <section class="card hidden" id="step-3">
                <h2>Jaka kawa do kt√≥rej fili≈ºanki?</h2>
                <div id="cup-types-container"></div>
                <div class="step-nav">
                    <button type="button" class="btn-back-step" id="back-3">‚Üê Wr√≥ƒá</button>
                    <button type="button" class="btn-next" id="next-3">Dalej ‚Üí</button>
                </div>
            </section>

            <!-- STEP 4: Strength -->
            <section class="card hidden" id="step-4">
                <h2>Moc kawy</h2>
                <div class="button-group coffee-type" id="strength-group">
                    <button type="button" data-value="weak">
                        <span class="type-icon">üåø</span>
                        <span class="type-name">S≈Çaba</span>
                        <span class="type-ratio">lekka</span>
                    </button>
                    <button type="button" data-value="medium" class="active">
                        <span class="type-icon">‚òï</span>
                        <span class="type-name">≈örednia</span>
                        <span class="type-ratio">klasyczna</span>
                    </button>
                    <button type="button" data-value="strong">
                        <span class="type-icon">üí™</span>
                        <span class="type-name">Mocna</span>
                        <span class="type-ratio">intensywna</span>
                    </button>
                </div>
                <div class="step-nav">
                    <button type="button" class="btn-back-step" id="back-4">‚Üê Wr√≥ƒá</button>
                    <button type="button" class="btn-brew" id="brew-btn">Przygotuj przepis ‚òï</button>
                </div>
            </section>

            <!-- RECIPE -->
            <section class="card hidden" id="recipe-section">
                <h2>Baza kawy (French Press)</h2>
                <div class="recipe-summary" id="recipe-summary"></div>

                <div class="breakdown-section hidden" id="recipe-breakdown">
                    <h3>Podzia≈Ç na fili≈ºanki</h3>
                    <div class="breakdown-content"></div>
                </div>

                <!-- Timer -->
                <div class="timer-section" id="timer-section">
                    <h3>Timer parzenia</h3>
                    <div class="timer-display">
                        <div class="timer-ring-wrap">
                            <svg class="timer-ring" viewBox="0 0 120 120">
                                <circle class="timer-ring-bg" cx="60" cy="60" r="54" />
                                <circle class="timer-ring-progress" id="timer-ring-progress" cx="60" cy="60" r="54" />
                            </svg>
                            <div class="timer-inner">
                                <span class="timer-phase" id="timer-phase">Blooming</span>
                                <span class="timer-time" id="timer-time">0:30</span>
                            </div>
                        </div>
                    </div>
                    <div class="timer-controls">
                        <button type="button" class="timer-btn" id="timer-start">Start</button>
                        <button type="button" class="timer-btn timer-btn-secondary" id="timer-reset">Od nowa</button>
                    </div>
                    <div class="timer-phases" id="timer-phases">
                        <div class="timer-phase-indicator active" id="phase-bloom">
                            <span class="phase-dot"></span>
                            <span>Blooming</span>
                        </div>
                        <div class="timer-phase-connector"></div>
                        <div class="timer-phase-indicator" id="phase-brew">
                            <span class="phase-dot"></span>
                            <span>Parzenie</span>
                        </div>
                    </div>
                </div>

                <h3>Kroki</h3>
                <ol class="steps-list" id="steps-list"></ol>

                <div id="recipe-tips"></div>

                <div class="recipe-actions">
                    <button type="button" class="btn-back" id="back-btn">‚Üê Od nowa</button>
                    <button type="button" class="btn-save" id="save-btn">Zapisz ‚≠ê</button>
                </div>
            </section>
        </main>

        <footer>
            <p>Kawusiomat &mdash; parz kawƒô jak barista ü´ò</p>
        </footer>
    </div>

    <div class="toast" id="toast"></div>
    <script src="app.js"></script>
</body>
</html>
